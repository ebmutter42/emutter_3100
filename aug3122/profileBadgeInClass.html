<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

</head>
<body class="bg-primary-container">
    <div class="col-4">
        <form class="mt-5">
            <select id="txtCharacterSelect" class="form-control" aria-label="Select Character">
 
            </select>
            <button type="button" class="btn btn-warning" id="btnFindCharacter">Find</button>
        </form>
    </div>
    
    <div id="profileCard" class="card col-lg-3 col-md-4 col-sm-10 col-10 d-none">
        <!--<div class="card-header">
            <h3 id="txtOrgName">Org Name</h3>
        </div> -->
        <div class="card-body">
            <div class="">
                <div class="col-12">
                    <img id="imgProfile" src="images/hippo.png" alt="profile picture" class="rounded-circle mx-auto d-block img-fluid">
                </div>
                
                <div class="col-12">
                    <h3 id="txtName" class="col-12 text-center" aria-label="First Name Last Name">First Name Last Name</h3>
                    <p id="txtJob" class="col-12 text-center" aria-label="Job">Job</p>
                </div>
            </div>
    
            <div class="">
                <div class="col-12">
                    <h4>Address</h4>
                    <p id="txtStreetAddress" aria-label="Street Address">Street Address</p>
                    <p id="txtCityState" aria-label="City and State">City, State</p>
                    <p id="txtZip" aria-label="Zipcode">Zip</p>
                </div>
                <div class="col-12">
                    <h4>Phone Number</h4>
                    <p id="txtPhoneNumber" aria-label="Phone Number">Phone Number</p>
                    <h4>Hire Date</h4>
                    <p id="txtHireDate" aria-label="Hire Date">Hire Date</p>
                </div>
            </div>
        </div>

    </div>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src="js/app.js"></script>
    <script>

        $.getJSON('https://swollenhippo.com/getCharactersByAPIKey.php?APIKey=Mickey2022!', (result)=>{
            console.table(result);
            let arrCharacters = result;
            console.log(arrCharacters[0]);

            arrCharacters.forEach(function(character) {
                console.log(character);
                $('#txtCharacterSelect').append('<option value="' + character.CodeName + '">' + character.FirstName +' ' + character.LastName + '</option>')
            });

        });

        $('#btnFindCharacter').on('click', function(){
            let strCodename = $('#txtCharacterSelect option:selected').val();
            $('#profileCard').removeClass('d-none' );
            var objCharacter;
            $.getJSON('https://www.swollenhippo.com/getProfileDetailsByAPIKey.php',
                {APIKey:'Mickey2022!',Codename:strCodename},
                (result) => {
                    objCharacter =result;
                    console.log(objCharacter);

                    $('#txtOrgName').text(objCharacter.Agency);
                    $('#txtName').text(objCharacter.FirstName + ' ' + objCharacter.LastName);
                    $('#txtJob').text(objCharacter.Job);
                    $('#txtStreetAddress').text(objCharacter.Street1);
                    $('#txtCityState').text(objCharacter.City + ', ' + objCharacter.State);
                    $('#txtZip').text(objCharacter.ZIP);
                    $('#txtPhoneNumber').text(objCharacter.Phone);
                    $('#txtHireDate').text(objCharacter.HireDate);
                    $('#imgProfile').attr('src', objCharacter.Image);
                    $('#imgProfile').attr('alt', objCharacter.FirstName + ' ' + objCharacter.LastName + ' Profile Image');
            });
        })

        

        /*
        var objCharacter;
        $.getJSON('https://www.swollenhippo.com/getProfileDetailsByAPIKey.php',
            {APIKey:'DuffManSays,Phrasing!',Codename:'Duchess'},
            (result) => {
                objCharacter =result;
                console.log(objCharacter);

                $('#txtOrgName').text(objCharacter.Agency);
                $('#txtName').text(objCharacter.FirstName + ' ' + objCharacter.LastName);
                $('#txtJob').text(objCharacter.Job);
                $('#txtStreetAddress').text(objCharacter.Street1);
                $('#txtCityState').text(objCharacter.City + ', ' + objCharacter.State);
                $('#txtZip').text(objCharacter.ZIP);
                $('#txtPhoneNumber').text(objCharacter.Phone);
                $('#txtHireDate').text(objCharacter.HireDate);
                $('#imgProfile').attr('src', objCharacter.Image);
                $('#imgProfile').attr('alt', objCharacter.FirstName + ' ' + objCharacter.LastName + ' Profile Image');
        });
        */

    </script>
    
</body>
</html>